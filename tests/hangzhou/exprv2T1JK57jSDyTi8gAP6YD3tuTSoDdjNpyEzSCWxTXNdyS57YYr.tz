{ storage
    (pair (pair (pair (address %admin) (pair (big_map %balance address nat) (nat %current_ticket)))
                (pair (pair (big_map %house_pool address (pair (nat %amount) (bool %auto_withdraw)))
                            (nat %house_pool_amount))
                      (pair (set %house_pool_indexes address) (int %last_house_pool_diff))))
          (pair (pair (map %last_winner address nat)
                      (pair (big_map %metadata string bytes) (address %operator)))
                (pair (pair (bool %pick_lottery_permission)
                            (big_map %player_pool nat (pair (nat %amount) (map %players address nat))))
                      (pair (address %token_address) (bool %withdraw_permission))))) ;
  parameter
    (or (or (or (nat %deposit) (bool %grant_pick_lottery_permission))
            (or (bool %grant_withdraw_permission)
                (or (pair %house_deposit (nat %amount) (bool %auto_withdraw)) (unit %house_withdraw))))
        (or (or (unit %migrate_data) (nat %oracle))
            (or (pair %player_pick_lottery (nat %amount) (list %tickets nat))
                (or (address %update_operator) (nat %withdraw))))) ;
  code { CAST (pair (or (or (or nat bool) (or bool (or (pair nat bool) unit)))
                        (or (or unit nat) (or (pair nat (list nat)) (or address nat))))
                    (pair (pair (pair address (pair (big_map address nat) nat))
                                (pair (pair (big_map address (pair nat bool)) nat) (pair (set address) int)))
                          (pair (pair (map address nat) (pair (big_map string bytes) address))
                                (pair (pair bool (big_map nat (pair nat (map address nat)))) (pair address bool))))) ;
         UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { IF_LEFT
                   { DUP ;
                     PUSH nat 0 ;
                     COMPARE ;
                     LT ;
                     IF {} { PUSH string "INVALID INPUT" ; FAILWITH } ;
                     NIL operation ;
                     DUP 3 ;
                     GET 7 ;
                     CONTRACT %transfer (list (pair address (list (pair address (pair nat nat))))) ;
                     IF_NONE { PUSH int 25 ; FAILWITH } {} ;
                     PUSH mutez 0 ;
                     NIL (pair address (list (pair address (pair nat nat)))) ;
                     NIL (pair address (pair nat nat)) ;
                     DUP 6 ;
                     PUSH nat 0 ;
                     SELF_ADDRESS ;
                     PAIR 3 ;
                     CONS ;
                     SENDER ;
                     PAIR ;
                     CONS ;
                     TRANSFER_TOKENS ;
                     CONS ;
                     DUP 3 ;
                     CAR ;
                     CAR ;
                     GET 3 ;
                     SENDER ;
                     MEM ;
                     IF { DIG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DUP ;
                          SENDER ;
                          DUP ;
                          DUG 2 ;
                          GET ;
                          IF_NONE { PUSH int 99 ; FAILWITH } {} ;
                          DIG 8 ;
                          ADD ;
                          SOME ;
                          SWAP ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP }
                        { DIG 2 ;
                          UNPAIR ;
                          UNPAIR ;
                          UNPAIR ;
                          SWAP ;
                          UNPAIR ;
                          DIG 6 ;
                          SOME ;
                          SENDER ;
                          UPDATE ;
                          PAIR ;
                          SWAP ;
                          PAIR ;
                          PAIR ;
                          PAIR ;
                          SWAP } }
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     GET 4 ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF { PUSH bool True }
                        { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; CAR ; SENDER ; COMPARE ; EQ } ;
                     IF {} { PUSH string "ADMIN REQUIRED" ; FAILWITH } ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     CDR ;
                     DIG 4 ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     NIL operation } }
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     GET 4 ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF { PUSH bool True }
                        { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; CAR ; SENDER ; COMPARE ; EQ } ;
                     IF {} { PUSH string "ADMIN REQUIRED" ; FAILWITH } ;
                     UPDATE 8 }
                   { IF_LEFT
                       { DUP ;
                         CAR ;
                         PUSH nat 0 ;
                         COMPARE ;
                         LT ;
                         IF { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; GET 3 ; SENDER ; MEM }
                            { PUSH bool False } ;
                         IF { SWAP ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              CAR ;
                              GET 3 ;
                              SENDER ;
                              GET ;
                              IF_NONE { PUSH int 115 ; FAILWITH } {} ;
                              SWAP ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              COMPARE ;
                              LE }
                            { PUSH bool False } ;
                         IF {} { PUSH string "DEPOSIT REQUIRED" ; FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         DUP 6 ;
                         CAR ;
                         DIG 7 ;
                         CAR ;
                         CAR ;
                         GET 3 ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 117 ; FAILWITH } {} ;
                         SUB ;
                         ISNAT ;
                         IF_NONE { PUSH int 117 ; FAILWITH } {} ;
                         SOME ;
                         SENDER ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         GET 3 ;
                         CAR ;
                         SENDER ;
                         MEM ;
                         IF { SWAP ;
                              UNPAIR ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              UNPAIR ;
                              DUP ;
                              SENDER ;
                              DUP ;
                              DUG 2 ;
                              GET ;
                              IF_NONE { PUSH int 120 ; FAILWITH } {} ;
                              DUP ;
                              CAR ;
                              DUP 9 ;
                              CAR ;
                              ADD ;
                              UPDATE 1 ;
                              SOME ;
                              SWAP ;
                              UPDATE ;
                              DUP ;
                              SENDER ;
                              DUP ;
                              DUG 2 ;
                              GET ;
                              IF_NONE { PUSH int 121 ; FAILWITH } {} ;
                              DUP 8 ;
                              CDR ;
                              UPDATE 2 ;
                              SOME ;
                              SWAP ;
                              UPDATE ;
                              PAIR ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              PAIR ;
                              SWAP }
                            { SWAP ;
                              UNPAIR ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              UNPAIR ;
                              DIG 5 ;
                              DUP ;
                              CDR ;
                              SWAP ;
                              DUP ;
                              DUG 7 ;
                              CAR ;
                              PAIR ;
                              SOME ;
                              SENDER ;
                              UPDATE ;
                              PAIR ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              PAIR ;
                              SWAP } ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         DIG 5 ;
                         CAR ;
                         ADD ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         DUP ;
                         CAR ;
                         GET 5 ;
                         SENDER ;
                         MEM ;
                         IF {}
                            { UNPAIR ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              SWAP ;
                              UNPAIR ;
                              PUSH bool True ;
                              SENDER ;
                              UPDATE ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              SWAP ;
                              PAIR ;
                              PAIR } }
                       { DROP ;
                         DUP ;
                         CAR ;
                         GET 3 ;
                         CAR ;
                         SENDER ;
                         MEM ;
                         IF { DUP ; GET 8 } { PUSH bool False } ;
                         IF {} { PUSH string "INVALID HOUSE POOL BALANCE" ; FAILWITH } ;
                         DUP ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         DUP ;
                         SENDER ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                         DIG 7 ;
                         CAR ;
                         GET 3 ;
                         CAR ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                         CAR ;
                         ADD ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         DUP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         CAR ;
                         DUP 5 ;
                         CAR ;
                         GET 3 ;
                         CAR ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 139 ; FAILWITH } {} ;
                         CAR ;
                         DIG 5 ;
                         CAR ;
                         GET 3 ;
                         CDR ;
                         SUB ;
                         ISNAT ;
                         IF_NONE { PUSH int 139 ; FAILWITH } {} ;
                         SWAP ;
                         DUP ;
                         SENDER ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 140 ; FAILWITH } {} ;
                         PUSH nat 0 ;
                         UPDATE 1 ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         UNPAIR ;
                         PUSH bool False ;
                         SENDER ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR } } ;
                 NIL operation } }
           { IF_LEFT
               { IF_LEFT
                   { DROP ;
                     DUP ;
                     CAR ;
                     CAR ;
                     CAR ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF {} { PUSH string "ADMIN REQUIRED" ; FAILWITH } ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     PUSH address "tz1KkbL4UbTPwcSryGfM1TTD3DGAxAPh19Rc" ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     PUSH nat 6 ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     PUSH int 18000 ;
                     SWAP ;
                     PUSH bool True ;
                     PUSH address "tz1LN3wPFYuS5fCnodwxT94xVFLPtcFHvcHk" ;
                     UPDATE ;
                     PUSH bool True ;
                     PUSH address "tz1eRtn8FnaLVL97RsyJrSX6iDTeKHuBBh48" ;
                     UPDATE ;
                     PUSH bool True ;
                     PUSH address "tz1fE99znpJ8M7ix3Ve874BxR6JsQAMebb7A" ;
                     UPDATE ;
                     PUSH bool True ;
                     PUSH address "tz1hes6aF3Px3D8nPQx27fdwBKrXmGs1UYxT" ;
                     UPDATE ;
                     PUSH bool True ;
                     PUSH address "tz2K1rDmszPuzVQYUcyDFxeSm7ZEJdDvhXx4" ;
                     UPDATE ;
                     PAIR ;
                     SWAP ;
                     CAR ;
                     PUSH (option (pair nat bool)) (Some (Pair 479593 False)) ;
                     PUSH address "tz1fE99znpJ8M7ix3Ve874BxR6JsQAMebb7A" ;
                     UPDATE ;
                     PUSH (option (pair nat bool)) (Some (Pair 379083 False)) ;
                     PUSH address "tz1eRtn8FnaLVL97RsyJrSX6iDTeKHuBBh48" ;
                     UPDATE ;
                     PUSH (option (pair nat bool)) (Some (Pair 7256 False)) ;
                     PUSH address "tz2K1rDmszPuzVQYUcyDFxeSm7ZEJdDvhXx4" ;
                     UPDATE ;
                     PUSH (option (pair nat bool)) (Some (Pair 300669 False)) ;
                     PUSH address "tz1LN3wPFYuS5fCnodwxT94xVFLPtcFHvcHk" ;
                     UPDATE ;
                     PUSH (option (pair nat bool)) (Some (Pair 4339 False)) ;
                     PUSH address "tz1hes6aF3Px3D8nPQx27fdwBKrXmGs1UYxT" ;
                     UPDATE ;
                     PUSH nat 1170940 ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     PUSH (option nat) (Some 0) ;
                     PUSH address "tz1fE99znpJ8M7ix3Ve874BxR6JsQAMebb7A" ;
                     UPDATE ;
                     PUSH (option nat) (Some 0) ;
                     PUSH address "tz1eRtn8FnaLVL97RsyJrSX6iDTeKHuBBh48" ;
                     UPDATE ;
                     PUSH (option nat) (Some 0) ;
                     PUSH address "tz1LN3wPFYuS5fCnodwxT94xVFLPtcFHvcHk" ;
                     UPDATE ;
                     PUSH (option nat) (Some 999911) ;
                     PUSH address "tz1cFtm9iTi461RYyQxUAUNLLRue1EwJiA1d" ;
                     UPDATE ;
                     PUSH (option nat) (Some 90) ;
                     PUSH address "tz1Vp6dfSMGZykQCBG6wgBmFFKzayqN1PLCP" ;
                     UPDATE ;
                     PUSH (option nat) (Some 1000000) ;
                     PUSH address "tz1XybkRZWjLx3hwcy1hQ7PT6FWEhpHm1FBv" ;
                     UPDATE ;
                     PUSH (option nat) (Some 30000) ;
                     PUSH address "tz1RCcoPQg8NPojtZBdFQmbZFqqasWUk8Yep" ;
                     UPDATE ;
                     PUSH (option nat) (Some 120846) ;
                     PUSH address "tz1Tvs3i4WPM87k5P44AjBW1C5cWid9h7ChX" ;
                     UPDATE ;
                     PUSH (option nat) (Some 176) ;
                     PUSH address "tz1RLMKgXMWCr7drgc4Bjy57y4nWnTzwKVci" ;
                     UPDATE ;
                     PUSH (option nat) (Some 100013) ;
                     PUSH address "tz1UAuVzdHizWaLbDB61sicJpzz86U4BzWmw" ;
                     UPDATE ;
                     PUSH (option nat) (Some 1999) ;
                     PUSH address "tz2ENZEaCWY6j9jEnfjKVPkS7BzAP89RvWdM" ;
                     UPDATE ;
                     PUSH (option nat) (Some 100000) ;
                     PUSH address "tz2ALu8Jxf2SMgzSZaZEwfiJQbogpUDPStwz" ;
                     UPDATE ;
                     PUSH (option nat) (Some 292784) ;
                     PUSH address "tz2K1rDmszPuzVQYUcyDFxeSm7ZEJdDvhXx4" ;
                     UPDATE ;
                     PUSH (option nat) (Some 5003) ;
                     PUSH address "tz1Q4VRQC2MXCT6baepbasirizZa7t6e5ZG9" ;
                     UPDATE ;
                     PUSH (option nat) (Some 258848) ;
                     PUSH address "tz1UNoTDkRmjEkDhCidpmj9wm62XGBkVBVA8" ;
                     UPDATE ;
                     PUSH (option nat) (Some 900427) ;
                     PUSH address "tz1ZsNvZKUveN7FjRhMHTm9NiAUNAmrwdFKV" ;
                     UPDATE ;
                     PUSH (option nat) (Some 6505) ;
                     PUSH address "tz1YjsPAFc2RmuKa784bkeQhdVLzbnRVtB7c" ;
                     UPDATE ;
                     PUSH (option nat) (Some 100000) ;
                     PUSH address "tz1ZTGms8xaP6SJzYDgx6oahQntC1FQ7nakg" ;
                     UPDATE ;
                     PUSH (option nat) (Some 25000) ;
                     PUSH address "tz1hes6aF3Px3D8nPQx27fdwBKrXmGs1UYxT" ;
                     UPDATE ;
                     PUSH (option nat) (Some 100000) ;
                     PUSH address "tz1NiraRNtWgpXyyxopRTk2a7Py9oKFdrgkB" ;
                     UPDATE ;
                     PUSH (option nat) (Some 865000) ;
                     PUSH address "tz1aRF3qMDrbN95f8dGYTKPaey6J2qQQnk8j" ;
                     UPDATE ;
                     PUSH (option nat) (Some 1277) ;
                     PUSH address "tz1VcZtHTTPP9hufKDsf3yBSy5JyAmghX76k" ;
                     UPDATE ;
                     PUSH (option nat) (Some 41276) ;
                     PUSH address "tz1Uzm53vPr2Giyi32yT9GUvBErKqHPBjvQL" ;
                     UPDATE ;
                     PUSH (option nat) (Some 97019) ;
                     PUSH address "tz1MgDFQvyV8Vfc48HgeqMbCD2Po7nhoWDeL" ;
                     UPDATE ;
                     PUSH (option nat) (Some 33513303) ;
                     PUSH address "tz1fvNz6AoLyvXpavuFx96VbVBNnJEp3YpSR" ;
                     UPDATE ;
                     PUSH (option nat) (Some 53988952) ;
                     PUSH address "tz1WU8AxBsN9QqFXTQxjtPoG2mqCqsqjLkNX" ;
                     UPDATE ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     PAIR }
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 3 ;
                     GET 4 ;
                     SENDER ;
                     COMPARE ;
                     EQ ;
                     IF { DUP ; PUSH nat 0 ; SWAP ; COMPARE ; GE } { PUSH bool False } ;
                     IF { DUP ; PUSH nat 100 ; COMPARE ; GT } { PUSH bool False } ;
                     IF {} { PUSH string "WRONG TICKET" ; FAILWITH } ;
                     SWAP ;
                     UNPAIR ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     DUP 5 ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     PAIR ;
                     DUP ;
                     DUG 2 ;
                     CAR ;
                     GET 3 ;
                     CDR ;
                     DIG 2 ;
                     UNPAIR ;
                     UNPAIR ;
                     SWAP ;
                     UNPAIR ;
                     SWAP ;
                     CAR ;
                     PUSH int 0 ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     SWAP ;
                     PAIR ;
                     PAIR ;
                     DUG 2 ;
                     PUSH nat 0 ;
                     PUSH bool True ;
                     LOOP { DUP 3 ;
                            SWAP ;
                            DUP ;
                            DUG 2 ;
                            COMPARE ;
                            EQ ;
                            IF { DUP 4 ;
                                 GET 5 ;
                                 CDR ;
                                 SWAP ;
                                 DUP ;
                                 DUG 2 ;
                                 MEM ;
                                 IF { DUP 4 ;
                                      GET 5 ;
                                      CDR ;
                                      SWAP ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 180 ; FAILWITH } {} ;
                                      CDR ;
                                      ITER { DIG 4 ;
                                             UNPAIR ;
                                             UNPAIR ;
                                             UNPAIR ;
                                             SWAP ;
                                             UNPAIR ;
                                             DUP ;
                                             DUP 7 ;
                                             CAR ;
                                             DUP ;
                                             DUG 2 ;
                                             GET ;
                                             IF_NONE { PUSH int 181 ; FAILWITH } {} ;
                                             PUSH int 71 ;
                                             DIG 8 ;
                                             CDR ;
                                             INT ;
                                             MUL ;
                                             ISNAT ;
                                             IF_NONE { PUSH int 181 ; FAILWITH } {} ;
                                             ADD ;
                                             SOME ;
                                             SWAP ;
                                             UPDATE ;
                                             PAIR ;
                                             SWAP ;
                                             PAIR ;
                                             PAIR ;
                                             PAIR ;
                                             DUG 3 } ;
                                      DUP 4 ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      CAR ;
                                      DUP 8 ;
                                      GET 5 ;
                                      CDR ;
                                      DUP 6 ;
                                      GET ;
                                      IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                                      CAR ;
                                      PUSH nat 70 ;
                                      MUL ;
                                      DIG 8 ;
                                      CAR ;
                                      GET 3 ;
                                      CDR ;
                                      SUB ;
                                      ISNAT ;
                                      IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      DUP ;
                                      DUG 4 ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      DIG 8 ;
                                      GET 5 ;
                                      CDR ;
                                      DUP 7 ;
                                      GET ;
                                      IF_NONE { PUSH int 185 ; FAILWITH } {} ;
                                      CAR ;
                                      PUSH nat 70 ;
                                      MUL ;
                                      INT ;
                                      SWAP ;
                                      SUB ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 187 ; FAILWITH } {} ;
                                      PUSH nat 0 ;
                                      UPDATE 1 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUP ;
                                      DUG 4 ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      CDR ;
                                      DIG 6 ;
                                      GET 5 ;
                                      CDR ;
                                      DUP 5 ;
                                      GET ;
                                      IF_NONE { PUSH int 188 ; FAILWITH } {} ;
                                      CDR ;
                                      PAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 189 ; FAILWITH } {} ;
                                      EMPTY_MAP address nat ;
                                      UPDATE 2 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUG 3 }
                                    { DIG 3 ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      CDR ;
                                      EMPTY_MAP address nat ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUG 3 } }
                               { DUP 4 ;
                                 GET 5 ;
                                 CDR ;
                                 SWAP ;
                                 DUP ;
                                 DUG 2 ;
                                 MEM ;
                                 IF { DUP 4 ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DIG 8 ;
                                      GET 5 ;
                                      CDR ;
                                      DUP 7 ;
                                      GET ;
                                      IF_NONE { PUSH int 195 ; FAILWITH } {} ;
                                      CAR ;
                                      ADD ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      DUP ;
                                      DUG 4 ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      DIG 8 ;
                                      GET 5 ;
                                      CDR ;
                                      DUP 7 ;
                                      GET ;
                                      IF_NONE { PUSH int 196 ; FAILWITH } {} ;
                                      CAR ;
                                      INT ;
                                      ADD ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 197 ; FAILWITH } {} ;
                                      PUSH nat 0 ;
                                      UPDATE 1 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 198 ; FAILWITH } {} ;
                                      EMPTY_MAP address nat ;
                                      UPDATE 2 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUG 3 }
                                    {} } ;
                            PUSH nat 1 ;
                            ADD ;
                            DUP ;
                            PUSH nat 100 ;
                            COMPARE ;
                            GT } ;
                     DROP ;
                     DUP 3 ;
                     CAR ;
                     GET 5 ;
                     ITER { DUP 4 ;
                            UNPAIR ;
                            UNPAIR ;
                            SWAP ;
                            UNPAIR ;
                            UNPAIR ;
                            DUP ;
                            DUP 7 ;
                            DUP ;
                            DUG 2 ;
                            GET ;
                            IF_NONE { PUSH int 201 ; FAILWITH } {} ;
                            DUP 9 ;
                            DIG 11 ;
                            DUP ;
                            CAR ;
                            GET 3 ;
                            CDR ;
                            SWAP ;
                            CAR ;
                            GET 3 ;
                            CAR ;
                            DIG 10 ;
                            GET ;
                            IF_NONE { PUSH int 201 ; FAILWITH } {} ;
                            CAR ;
                            MUL ;
                            EDIV ;
                            IF_NONE { PUSH int 201 ; FAILWITH } { CAR } ;
                            INT ;
                            ISNAT ;
                            IF_NONE { PUSH int 201 ; FAILWITH } {} ;
                            UPDATE 1 ;
                            SOME ;
                            SWAP ;
                            UPDATE ;
                            PAIR ;
                            PAIR ;
                            SWAP ;
                            PAIR ;
                            PAIR ;
                            DUG 2 } ;
                     DUP 3 ;
                     CAR ;
                     GET 5 ;
                     ITER { DUP 4 ;
                            CAR ;
                            GET 3 ;
                            CAR ;
                            SWAP ;
                            DUP ;
                            DUG 2 ;
                            GET ;
                            IF_NONE { PUSH int 204 ; FAILWITH } {} ;
                            CDR ;
                            IF { DUP 4 ;
                                 UNPAIR ;
                                 UNPAIR ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 DUP ;
                                 DUP 7 ;
                                 DUP ;
                                 DUG 2 ;
                                 GET ;
                                 IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                                 DIG 10 ;
                                 CAR ;
                                 GET 3 ;
                                 CAR ;
                                 DUP 9 ;
                                 GET ;
                                 IF_NONE { PUSH int 138 ; FAILWITH } {} ;
                                 CAR ;
                                 ADD ;
                                 SOME ;
                                 SWAP ;
                                 UPDATE ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 PAIR ;
                                 PAIR ;
                                 DUP ;
                                 DUG 4 ;
                                 UNPAIR ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 CAR ;
                                 DUP 8 ;
                                 CAR ;
                                 GET 3 ;
                                 CAR ;
                                 DUP 6 ;
                                 GET ;
                                 IF_NONE { PUSH int 139 ; FAILWITH } {} ;
                                 CAR ;
                                 DIG 8 ;
                                 CAR ;
                                 GET 3 ;
                                 CDR ;
                                 SUB ;
                                 ISNAT ;
                                 IF_NONE { PUSH int 139 ; FAILWITH } {} ;
                                 SWAP ;
                                 DUP ;
                                 DUP 7 ;
                                 DUP ;
                                 DUG 2 ;
                                 GET ;
                                 IF_NONE { PUSH int 140 ; FAILWITH } {} ;
                                 PUSH nat 0 ;
                                 UPDATE 1 ;
                                 SOME ;
                                 SWAP ;
                                 UPDATE ;
                                 PAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 PUSH bool False ;
                                 DIG 6 ;
                                 UPDATE ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 PAIR ;
                                 DUG 2 }
                               { DROP } } ;
                     DROP 2 } ;
                 NIL operation }
               { IF_LEFT
                   { SWAP ;
                     DUP ;
                     DUG 2 ;
                     GET 5 ;
                     CAR ;
                     IF {} { PUSH string "REQUIRED PERMISSION" ; FAILWITH } ;
                     DUP ;
                     CAR ;
                     PUSH nat 0 ;
                     COMPARE ;
                     LT ;
                     IF { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; GET 3 ; SENDER ; MEM }
                        { PUSH bool False } ;
                     IF {} { PUSH string "INVALID INPUT" ; FAILWITH } ;
                     DUP ;
                     CDR ;
                     ITER { DUP 3 ;
                            CAR ;
                            CAR ;
                            GET 3 ;
                            SENDER ;
                            GET ;
                            IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                            DUP 3 ;
                            CAR ;
                            COMPARE ;
                            LE ;
                            IF { DUP ; PUSH nat 0 ; SWAP ; COMPARE ; GE } { PUSH bool False } ;
                            IF { DUP ; PUSH nat 100 ; COMPARE ; GT } { PUSH bool False } ;
                            IF {} { PUSH string "INVALID TICKET" ; FAILWITH } ;
                            DUP 3 ;
                            UNPAIR ;
                            UNPAIR ;
                            UNPAIR ;
                            SWAP ;
                            UNPAIR ;
                            DUP 7 ;
                            CAR ;
                            DIG 8 ;
                            CAR ;
                            CAR ;
                            GET 3 ;
                            SENDER ;
                            GET ;
                            IF_NONE { PUSH int 151 ; FAILWITH } {} ;
                            SUB ;
                            ISNAT ;
                            IF_NONE { PUSH int 151 ; FAILWITH } {} ;
                            SOME ;
                            SENDER ;
                            UPDATE ;
                            PAIR ;
                            SWAP ;
                            PAIR ;
                            PAIR ;
                            PAIR ;
                            DUP ;
                            DUG 3 ;
                            GET 5 ;
                            CDR ;
                            SWAP ;
                            DUP ;
                            DUG 2 ;
                            MEM ;
                            IF { DUP 3 ;
                                 GET 5 ;
                                 CDR ;
                                 SWAP ;
                                 DUP ;
                                 DUG 2 ;
                                 GET ;
                                 IF_NONE { PUSH int 154 ; FAILWITH } {} ;
                                 CDR ;
                                 SENDER ;
                                 MEM ;
                                 IF { DIG 2 ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 155 ; FAILWITH } {} ;
                                      DUP ;
                                      CDR ;
                                      DUP ;
                                      SENDER ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 155 ; FAILWITH } {} ;
                                      DUP 12 ;
                                      CAR ;
                                      ADD ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      UPDATE 2 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUG 2 }
                                    { DIG 2 ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      SWAP ;
                                      UNPAIR ;
                                      UNPAIR ;
                                      SWAP ;
                                      DUP ;
                                      DUP 7 ;
                                      DUP ;
                                      DUG 2 ;
                                      GET ;
                                      IF_NONE { PUSH int 157 ; FAILWITH } {} ;
                                      DUP ;
                                      CDR ;
                                      DUP 10 ;
                                      CAR ;
                                      SOME ;
                                      SENDER ;
                                      UPDATE ;
                                      UPDATE 2 ;
                                      SOME ;
                                      SWAP ;
                                      UPDATE ;
                                      SWAP ;
                                      PAIR ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      SWAP ;
                                      PAIR ;
                                      DUG 2 } ;
                                 DIG 2 ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 UNPAIR ;
                                 SWAP ;
                                 DUP ;
                                 DUP 7 ;
                                 DUP ;
                                 DUG 2 ;
                                 GET ;
                                 IF_NONE { PUSH int 158 ; FAILWITH } {} ;
                                 DUP ;
                                 CAR ;
                                 DUP 10 ;
                                 CAR ;
                                 ADD ;
                                 UPDATE 1 ;
                                 SOME ;
                                 SWAP ;
                                 UPDATE ;
                                 SWAP ;
                                 PAIR ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 DUG 2 }
                               { DIG 2 ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 SWAP ;
                                 UNPAIR ;
                                 UNPAIR ;
                                 SWAP ;
                                 EMPTY_MAP address nat ;
                                 DUP 8 ;
                                 CAR ;
                                 SOME ;
                                 SENDER ;
                                 UPDATE ;
                                 DUP 8 ;
                                 CAR ;
                                 PAIR ;
                                 SOME ;
                                 DUP 7 ;
                                 UPDATE ;
                                 SWAP ;
                                 PAIR ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 SWAP ;
                                 PAIR ;
                                 DUG 2 } ;
                            DUP 3 ;
                            CAR ;
                            GET 3 ;
                            CDR ;
                            PUSH nat 80 ;
                            DUP 5 ;
                            GET 5 ;
                            CDR ;
                            DIG 3 ;
                            GET ;
                            IF_NONE { PUSH int 165 ; FAILWITH } {} ;
                            CAR ;
                            MUL ;
                            COMPARE ;
                            LE ;
                            IF {} { PUSH string "HOUSE POOL DRY" ; FAILWITH } } ;
                     DROP ;
                     NIL operation }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.admin" ; FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         CAR ;
                         DIG 4 ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         NIL operation }
                       { DUP ;
                         PUSH nat 0 ;
                         COMPARE ;
                         LT ;
                         IF { SWAP ; DUP ; DUG 2 ; CAR ; CAR ; GET 3 ; SENDER ; MEM }
                            { PUSH bool False } ;
                         IF { SWAP ;
                              DUP ;
                              DUG 2 ;
                              CAR ;
                              CAR ;
                              GET 3 ;
                              SENDER ;
                              GET ;
                              IF_NONE { PUSH int 106 ; FAILWITH } {} ;
                              SWAP ;
                              DUP ;
                              DUG 2 ;
                              COMPARE ;
                              LE }
                            { PUSH bool False } ;
                         IF {} { PUSH string "INVALID INPUT" ; FAILWITH } ;
                         NIL operation ;
                         DUP 3 ;
                         GET 7 ;
                         CONTRACT %transfer (list (pair address (list (pair address (pair nat nat))))) ;
                         IF_NONE { PUSH int 25 ; FAILWITH } {} ;
                         PUSH mutez 0 ;
                         NIL (pair address (list (pair address (pair nat nat)))) ;
                         NIL (pair address (pair nat nat)) ;
                         DUP 6 ;
                         PUSH nat 0 ;
                         SENDER ;
                         PAIR 3 ;
                         CONS ;
                         SELF_ADDRESS ;
                         PAIR ;
                         CONS ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         DUP 3 ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         DIG 6 ;
                         DIG 7 ;
                         CAR ;
                         CAR ;
                         GET 3 ;
                         SENDER ;
                         GET ;
                         IF_NONE { PUSH int 110 ; FAILWITH } {} ;
                         SUB ;
                         ISNAT ;
                         IF_NONE { PUSH int 110 ; FAILWITH } {} ;
                         SOME ;
                         SENDER ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         SWAP } } } } ;
         PAIR } }
